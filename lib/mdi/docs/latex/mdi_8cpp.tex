\hypertarget{mdi_8cpp}{\section{/home/tbarnes/mdi/molssi\-\_\-driver\-\_\-interface/molssi\-\_\-driver\-\_\-interface/mdi.cpp File Reference}
\label{mdi_8cpp}\index{/home/tbarnes/mdi/molssi\-\_\-driver\-\_\-interface/molssi\-\_\-driver\-\_\-interface/mdi.\-cpp@{/home/tbarnes/mdi/molssi\-\_\-driver\-\_\-interface/molssi\-\_\-driver\-\_\-interface/mdi.\-cpp}}
}


Functions callable by users of the Mol\-S\-S\-I Driver Interface.  


{\ttfamily \#include $<$signal.\-h$>$}\\*
{\ttfamily \#include $<$netdb.\-h$>$}\\*
{\ttfamily \#include $<$netinet/in.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$sys/types.\-h$>$}\\*
{\ttfamily \#include $<$sys/un.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$vector$>$}\\*
{\ttfamily \#include \char`\"{}mdi.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}communicator.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mdi\-\_\-global.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{mdi_8cpp_a10ceefc902b8eb71e2383d7ac95de2c7}{void {\bfseries mdi\-\_\-error} (const char $\ast$message)}\label{mdi_8cpp_a10ceefc902b8eb71e2383d7ac95de2c7}

\item 
\hypertarget{mdi_8cpp_a47630f8f823b92ad9333c3c5f130cf90}{void {\bfseries sigint\-\_\-handler} (int dummy)}\label{mdi_8cpp_a47630f8f823b92ad9333c3c5f130cf90}

\item 
\hypertarget{mdi_8cpp_a8bdb67120e391198c5d7e592169a7e67}{int {\bfseries gather\-\_\-names} (const char $\ast$hostname\-\_\-ptr, bool do\-\_\-split)}\label{mdi_8cpp_a8bdb67120e391198c5d7e592169a7e67}

\item 
\hypertarget{mdi_8cpp_af15a7354cf37401b3a482614dedbcad9}{int {\bfseries M\-D\-I\-\_\-\-Listen\-\_\-\-T\-C\-P} (int port)}\label{mdi_8cpp_af15a7354cf37401b3a482614dedbcad9}

\item 
\hypertarget{mdi_8cpp_a200d815da834074e8a718519b9f833a6}{int {\bfseries M\-D\-I\-\_\-\-Request\-\_\-\-Connection\-\_\-\-T\-C\-P} (int port, char $\ast$hostname\-\_\-ptr)}\label{mdi_8cpp_a200d815da834074e8a718519b9f833a6}

\item 
int \hyperlink{mdi_8cpp_ae05ae377fa8de592f62c696c041b7d0a}{M\-D\-I\-\_\-\-Init} (const char $\ast$options, void $\ast$world\-\_\-comm)
\begin{DoxyCompactList}\small\item\em Initialize communication through the M\-D\-I library. \end{DoxyCompactList}\item 
M\-D\-I\-\_\-\-Comm \hyperlink{mdi_8cpp_a570557fdd42049c5e285faf546037531}{M\-D\-I\-\_\-\-Accept\-\_\-\-Communicator} ()
\begin{DoxyCompactList}\small\item\em Accept a new M\-D\-I communicator. \end{DoxyCompactList}\item 
int \hyperlink{mdi_8cpp_a5356b5fe5aca86c3390e13f8762a01e1}{M\-D\-I\-\_\-\-Send} (const char $\ast$buf, int count, M\-D\-I\-\_\-\-Datatype datatype, M\-D\-I\-\_\-\-Comm comm)
\begin{DoxyCompactList}\small\item\em Send data through the M\-D\-I connection. \end{DoxyCompactList}\item 
int \hyperlink{mdi_8cpp_ac94ed31fb09c8445b40265a89c72e006}{M\-D\-I\-\_\-\-Recv} (char $\ast$buf, int count, M\-D\-I\-\_\-\-Datatype datatype, M\-D\-I\-\_\-\-Comm comm)
\begin{DoxyCompactList}\small\item\em Receive data through the M\-D\-I connection. \end{DoxyCompactList}\item 
int \hyperlink{mdi_8cpp_a77e579331a36c3f0eb7f7ff9668e789d}{M\-D\-I\-\_\-\-Send\-\_\-\-Command} (const char $\ast$buf, M\-D\-I\-\_\-\-Comm comm)
\begin{DoxyCompactList}\small\item\em Send a command of length {\ttfamily M\-D\-I\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-L\-E\-N\-G\-T\-H} through the M\-D\-I connection. \end{DoxyCompactList}\item 
int \hyperlink{mdi_8cpp_ab03c0ea8beda690d6f796d3089cbfe15}{M\-D\-I\-\_\-\-Recv\-\_\-\-Command} (char $\ast$buf, M\-D\-I\-\_\-\-Comm comm)
\begin{DoxyCompactList}\small\item\em Receive a command of length {\ttfamily M\-D\-I\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-L\-E\-N\-G\-T\-H} through the M\-D\-I connection. \end{DoxyCompactList}\item 
double \hyperlink{mdi_8cpp_a886c1af1124f55d869a6f2b80a68c5a7}{M\-D\-I\-\_\-\-Conversion\-\_\-\-Factor} (char $\ast$in\-\_\-unit, char $\ast$out\-\_\-unit)
\begin{DoxyCompactList}\small\item\em Return a conversion factor between two units. \end{DoxyCompactList}\item 
\hypertarget{mdi_8cpp_a0accde4a79728e8eaab73632daba3c15}{int {\bfseries M\-D\-I\-\_\-\-Get\-\_\-\-M\-P\-I\-\_\-\-Code\-\_\-\-Rank} ()}\label{mdi_8cpp_a0accde4a79728e8eaab73632daba3c15}

\item 
\hypertarget{mdi_8cpp_a6290edc0924c7f9375e4cb9e0c7a7744}{void {\bfseries M\-D\-I\-\_\-\-Set\-\_\-\-M\-P\-I\-\_\-\-Intra\-\_\-\-Rank} (int rank)}\label{mdi_8cpp_a6290edc0924c7f9375e4cb9e0c7a7744}

\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{mdi_8cpp_a0e14371f9fed3bc617c18b7105bdfeaf}{int {\bfseries driver\-\_\-sockfd}}\label{mdi_8cpp_a0e14371f9fed3bc617c18b7105bdfeaf}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Functions callable by users of the Mol\-S\-S\-I Driver Interface. 

\subsection{Function Documentation}
\hypertarget{mdi_8cpp_a570557fdd42049c5e285faf546037531}{\index{mdi.\-cpp@{mdi.\-cpp}!M\-D\-I\-\_\-\-Accept\-\_\-\-Communicator@{M\-D\-I\-\_\-\-Accept\-\_\-\-Communicator}}
\index{M\-D\-I\-\_\-\-Accept\-\_\-\-Communicator@{M\-D\-I\-\_\-\-Accept\-\_\-\-Communicator}!mdi.cpp@{mdi.\-cpp}}
\subsubsection[{M\-D\-I\-\_\-\-Accept\-\_\-\-Communicator}]{\setlength{\rightskip}{0pt plus 5cm}M\-D\-I\-\_\-\-Comm M\-D\-I\-\_\-\-Accept\-\_\-\-Communicator (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{mdi_8cpp_a570557fdd42049c5e285faf546037531}


Accept a new M\-D\-I communicator. 

The function returns an M\-D\-I\-\_\-\-Comm that describes a connection between two codes. If no new communicators are available, the function returns {\ttfamily M\-D\-I\-\_\-\-N\-U\-L\-L\-\_\-\-C\-O\-M\-M}. \hypertarget{mdi_8cpp_a886c1af1124f55d869a6f2b80a68c5a7}{\index{mdi.\-cpp@{mdi.\-cpp}!M\-D\-I\-\_\-\-Conversion\-\_\-\-Factor@{M\-D\-I\-\_\-\-Conversion\-\_\-\-Factor}}
\index{M\-D\-I\-\_\-\-Conversion\-\_\-\-Factor@{M\-D\-I\-\_\-\-Conversion\-\_\-\-Factor}!mdi.cpp@{mdi.\-cpp}}
\subsubsection[{M\-D\-I\-\_\-\-Conversion\-\_\-\-Factor}]{\setlength{\rightskip}{0pt plus 5cm}double M\-D\-I\-\_\-\-Conversion\-\_\-\-Factor (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{in\-\_\-unit, }
\item[{char $\ast$}]{out\-\_\-unit}
\end{DoxyParamCaption}
)}}\label{mdi_8cpp_a886c1af1124f55d869a6f2b80a68c5a7}


Return a conversion factor between two units. 

The function returns the conversion factor from {\ttfamily in\-\_\-unit} to {\ttfamily out\-\_\-unit}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em in\-\_\-unit} & Name of the unit to convert from. \\
\hline
\mbox{\tt in}  & {\em out\-\_\-unit} & Name of the unit to convert to. \\
\hline
\end{DoxyParams}
\hypertarget{mdi_8cpp_ae05ae377fa8de592f62c696c041b7d0a}{\index{mdi.\-cpp@{mdi.\-cpp}!M\-D\-I\-\_\-\-Init@{M\-D\-I\-\_\-\-Init}}
\index{M\-D\-I\-\_\-\-Init@{M\-D\-I\-\_\-\-Init}!mdi.cpp@{mdi.\-cpp}}
\subsubsection[{M\-D\-I\-\_\-\-Init}]{\setlength{\rightskip}{0pt plus 5cm}int M\-D\-I\-\_\-\-Init (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{options, }
\item[{void $\ast$}]{world\-\_\-comm}
\end{DoxyParamCaption}
)}}\label{mdi_8cpp_ae05ae377fa8de592f62c696c041b7d0a}


Initialize communication through the M\-D\-I library. 

If using the \char`\"{}-\/method M\-P\-I\char`\"{} option, this function must be called by all ranks. The function returns {\ttfamily 0} on a success.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em options} & Options describing the communication method used to connect to codes \\
\hline
\mbox{\tt in,out}  & {\em world\-\_\-comm} & On input, the M\-P\-I communicator that spans all of the codes. On output, the M\-P\-I communicator that spans the single code corresponding to the calling rank. Only used if the \char`\"{}-\/method M\-P\-I\char`\"{} option is provided. \\
\hline
\end{DoxyParams}
\hypertarget{mdi_8cpp_ac94ed31fb09c8445b40265a89c72e006}{\index{mdi.\-cpp@{mdi.\-cpp}!M\-D\-I\-\_\-\-Recv@{M\-D\-I\-\_\-\-Recv}}
\index{M\-D\-I\-\_\-\-Recv@{M\-D\-I\-\_\-\-Recv}!mdi.cpp@{mdi.\-cpp}}
\subsubsection[{M\-D\-I\-\_\-\-Recv}]{\setlength{\rightskip}{0pt plus 5cm}int M\-D\-I\-\_\-\-Recv (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buf, }
\item[{int}]{count, }
\item[{M\-D\-I\-\_\-\-Datatype}]{datatype, }
\item[{M\-D\-I\-\_\-\-Comm}]{comm}
\end{DoxyParamCaption}
)}}\label{mdi_8cpp_ac94ed31fb09c8445b40265a89c72e006}


Receive data through the M\-D\-I connection. 

If running with M\-P\-I, this function must be called only by rank {\ttfamily 0}. The function returns {\ttfamily 0} on a success.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em buf} & Pointer to the buffer where the received data will be stored. \\
\hline
\mbox{\tt in}  & {\em count} & Number of values (integers, double precision floats, characters, etc.) to be received. \\
\hline
\mbox{\tt in}  & {\em datatype} & M\-D\-I handle (M\-D\-I\-\_\-\-I\-N\-T, M\-D\-I\-\_\-\-D\-O\-U\-B\-L\-E, M\-D\-I\-\_\-\-C\-H\-A\-R, etc.) corresponding to the type of data to be received. \\
\hline
\mbox{\tt in}  & {\em comm} & M\-D\-I communicator associated with the connection to the sending code. \\
\hline
\end{DoxyParams}
\hypertarget{mdi_8cpp_ab03c0ea8beda690d6f796d3089cbfe15}{\index{mdi.\-cpp@{mdi.\-cpp}!M\-D\-I\-\_\-\-Recv\-\_\-\-Command@{M\-D\-I\-\_\-\-Recv\-\_\-\-Command}}
\index{M\-D\-I\-\_\-\-Recv\-\_\-\-Command@{M\-D\-I\-\_\-\-Recv\-\_\-\-Command}!mdi.cpp@{mdi.\-cpp}}
\subsubsection[{M\-D\-I\-\_\-\-Recv\-\_\-\-Command}]{\setlength{\rightskip}{0pt plus 5cm}int M\-D\-I\-\_\-\-Recv\-\_\-\-Command (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buf, }
\item[{M\-D\-I\-\_\-\-Comm}]{comm}
\end{DoxyParamCaption}
)}}\label{mdi_8cpp_ab03c0ea8beda690d6f796d3089cbfe15}


Receive a command of length {\ttfamily M\-D\-I\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-L\-E\-N\-G\-T\-H} through the M\-D\-I connection. 

If running with M\-P\-I, this function must be called only by rank {\ttfamily 0}. The function returns {\ttfamily 0} on a success.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em buf} & Pointer to the buffer where the received data will be stored. \\
\hline
\mbox{\tt in}  & {\em comm} & M\-D\-I communicator associated with the connection to the sending code. \\
\hline
\end{DoxyParams}
\hypertarget{mdi_8cpp_a5356b5fe5aca86c3390e13f8762a01e1}{\index{mdi.\-cpp@{mdi.\-cpp}!M\-D\-I\-\_\-\-Send@{M\-D\-I\-\_\-\-Send}}
\index{M\-D\-I\-\_\-\-Send@{M\-D\-I\-\_\-\-Send}!mdi.cpp@{mdi.\-cpp}}
\subsubsection[{M\-D\-I\-\_\-\-Send}]{\setlength{\rightskip}{0pt plus 5cm}int M\-D\-I\-\_\-\-Send (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{buf, }
\item[{int}]{count, }
\item[{M\-D\-I\-\_\-\-Datatype}]{datatype, }
\item[{M\-D\-I\-\_\-\-Comm}]{comm}
\end{DoxyParamCaption}
)}}\label{mdi_8cpp_a5356b5fe5aca86c3390e13f8762a01e1}


Send data through the M\-D\-I connection. 

If running with M\-P\-I, this function must be called only by rank {\ttfamily 0}. The function returns {\ttfamily 0} on a success.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em buf} & Pointer to the data to be sent. \\
\hline
\mbox{\tt in}  & {\em count} & Number of values (integers, double precision floats, characters, etc.) to be sent. \\
\hline
\mbox{\tt in}  & {\em datatype} & M\-D\-I handle (M\-D\-I\-\_\-\-I\-N\-T, M\-D\-I\-\_\-\-D\-O\-U\-B\-L\-E, M\-D\-I\-\_\-\-C\-H\-A\-R, etc.) corresponding to the type of data to be sent. \\
\hline
\mbox{\tt in}  & {\em comm} & M\-D\-I communicator associated with the intended recipient code. \\
\hline
\end{DoxyParams}
\hypertarget{mdi_8cpp_a77e579331a36c3f0eb7f7ff9668e789d}{\index{mdi.\-cpp@{mdi.\-cpp}!M\-D\-I\-\_\-\-Send\-\_\-\-Command@{M\-D\-I\-\_\-\-Send\-\_\-\-Command}}
\index{M\-D\-I\-\_\-\-Send\-\_\-\-Command@{M\-D\-I\-\_\-\-Send\-\_\-\-Command}!mdi.cpp@{mdi.\-cpp}}
\subsubsection[{M\-D\-I\-\_\-\-Send\-\_\-\-Command}]{\setlength{\rightskip}{0pt plus 5cm}int M\-D\-I\-\_\-\-Send\-\_\-\-Command (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{buf, }
\item[{M\-D\-I\-\_\-\-Comm}]{comm}
\end{DoxyParamCaption}
)}}\label{mdi_8cpp_a77e579331a36c3f0eb7f7ff9668e789d}


Send a command of length {\ttfamily M\-D\-I\-\_\-\-C\-O\-M\-M\-A\-N\-D\-\_\-\-L\-E\-N\-G\-T\-H} through the M\-D\-I connection. 

If running with M\-P\-I, this function must be called only by rank {\ttfamily 0}. The function returns {\ttfamily 0} on a success.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em buf} & Pointer to the data to be sent. \\
\hline
\mbox{\tt in}  & {\em comm} & M\-D\-I communicator associated with the intended recipient code. \\
\hline
\end{DoxyParams}
